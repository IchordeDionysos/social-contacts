<dom-module id="books-list">
  <style>
    span {
      flex-basis: 100%;
      margin: auto;
    }
  </style>
  <template>
    <book-dialog opened="{{opened}}" book="{{selected}}"></book-dialog>
    <template is="dom-if" if="{{books}}">
      <paper-item display="flex">
        <span>Buch-ID</span>
        <span>Author</span>
        <span>Originaltitel</span>
        <span>Sprache</span>
        <span>Status</span>
      </paper-item>
      <iron-list
            id="bookList"
            items="{{books}}"
            as="book"
            selection-enabled
            selected-item="{{selected}}">
        <template>
          <paper-item>
            <span>{{book.id}}</span>
            <span>{{book.author}}</span>
            <span>{{book.original}}</span>
            <span>{{book.language}}</span>
            <span>{{book.status}}</span>
          </paper-item>
        </template>
      </iron-list>
    </template>
    <template is="dom-if" if="{{!books}}">
      <paper-item 
          style="display:flex; ">
          <p style="width: 100%;text-align: center;">
            Noch keine BÃ¼cher eingetragen!
          </p>
      </paper-item>
      <paper-button 
          on-tap="_openAddBookDialog" 
          style="display:block;">
          Buch eintragen
      </paper-button>
    </template>
  </template>
  <script>
    Polymer({
      is: 'books-list',
      
      properties: {
        books: {
          notify: true
        },
        selected: {
          notify: true,
          obsever: '_selectionChanged'
        },
        opened: {
          notify: true,
          type: Boolean
        }
      },

      observers: [
        '_selectionChanged(selected)'
      ],
      
      _selectionChanged: function () {
        if (this.get('selected.id') === '' || this.get('selected.id') === undefined) {
          this.set('opened', false);
        } else {
          this.set('opened', true);
        }
      },

      _openAddBookDialog: function () {
        this.fire('add-book');
      }
      
    });
  </script>
</dom-module>